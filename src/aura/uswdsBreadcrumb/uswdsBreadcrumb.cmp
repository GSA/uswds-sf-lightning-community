<aura:component
  extends="forceCommunity:navigationMenuBase"
  implements="forceCommunity:availableForAllPageTypes"
  access="global"
>
  <ltng:require styles="{!$Resource.uswds_2_x+'/css/uswds.min.css'}" />
  <ltng:require scripts="{!$Resource.uswds_2_x+'/js/uswds.min.js'}" />
  <aura:attribute
    name="navigationLinkSetId"
    type="String"
    description="Accepts navigationLinkSetId or Developer Name of the corresponding Navigation Menu. This component expects a multi-tiered menu, menu and sub-menu items."
  />

  <!-- components set via Component Edit Menu-->
  <aura:attribute name="rdfa" type="String" />
  <aura:attribute name="wrap" type="String" />
  <aura:attribute name="pageName" type="String" />

  <!-- components set via controller -->
  <aura:attribute name="wrapClass" type="String" />

  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />

  <!-- default -->
  <nav class="{! 'usa-breadcrumb ' + v.wrapClass}" aria-label="Breadcrumbs,,">
    <!-- rdfa -->
    <aura:if isTrue="{!v.rdfa == 'Yes'}">
      <ol
        class="usa-breadcrumb__list"
        vocab="http://schema.org/"
        typeof="BreadcrumbList"
        onclick="{!c.onClick}"
      >
        <!-- iterate-->
        <aura:iteration items="{!v.menuItems}" var="item" indexVar="index">
          <li
            class="usa-breadcrumb__list-item"
            property="itemListElement"
            typeof="ListItem"
          >
            <a
              class="usa-breadcrumb__link"
              data-menu-item-id="{!item.id}"
              property="item"
              typeof="WebPage"
              ><span>{!item.label}</span></a
            >
            <meta property="position" content="{!index}" />
          </li>
        </aura:iteration>
        <li
          class="usa-breadcrumb__list-item usa-current"
          aria-current="page"
          property="item"
          typeof="WebPage"
        >
          <span>{!v.pageName}</span>
          <meta property="position" content="2" />
        </li>
      </ol>
      <!-- non-rdfa list-->
      <aura:set attribute="else">
        <ol class="usa-breadcrumb__list" onclick="{!c.onClick}">
          <!-- iterate-->
          <aura:iteration items="{!v.menuItems}" var="item" indexVar="index">
            <li class="usa-breadcrubm__list-item">
              <a class="usa-breadcrumb__link" data-menu-item-id="{!item.id}"
                ><span>{!item.label}</span></a
              >
            </li>
          </aura:iteration>
          <li class="usa-breadcrumb__list-item usa-current" aria-current="page">
            <span>{!v.pageName}</span>
          </li>
        </ol>
      </aura:set>
    </aura:if>
  </nav>
</aura:component>
